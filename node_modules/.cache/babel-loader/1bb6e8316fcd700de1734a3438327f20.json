{"ast":null,"code":"import firebase from \"../../config/firebase\";\nexport function googleLogin(history) {\n  return dispatch => {\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\"\n    });\n    Signin(dispatch, history, provider);\n  };\n}\nexport function facebookLogin(history) {\n  return dispatch => {\n    var provider = new firebase.auth.FacebookAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\"\n    });\n    Signin(dispatch, history, provider);\n  };\n}\nexport function githubLogin(history) {\n  return dispatch => {\n    var provider = new firebase.auth.GithubAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\"\n    });\n    Signin(dispatch, history, provider);\n  };\n}\n\nfunction Signin(dispatch, history, provider) {\n  firebase.auth().signInWithPopup(provider).then(function ({\n    user\n  }) {\n    const userInfo = {\n      name: user.displayName,\n      email: user.email,\n      imageUrl: user.photoURL,\n      uid: user.uid,\n      timestamp: firebase.database.ServerValue.TIMESTAMP\n    };\n    firebase.database().ref(\"/\").child(`users/${user.uid}`).set(userInfo).then(() => console.log(\"User Add SuccessFully\"));\n    dispatch({\n      type: \"SETUSER\",\n      payload: userInfo\n    });\n    history.push(\"/posts\");\n  }).catch(error => {\n    console.log(error);\n  });\n}\n\n_c = Signin;\nexport const checkUser = () => {\n  return dispatch => {\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user != null) {\n        firebase.database().ref(\"/\").child(`users/${user.uid}`).once('value', snapshot => {\n          const userInfo = snapshot.val();\n          dispatch({\n            type: \"SETUSER\",\n            payload: userInfo\n          });\n        });\n      }\n    });\n  };\n};\nexport const signOut = () => {\n  return dispatch => {\n    firebase.auth().signOut().then(function () {\n      dispatch({\n        type: \"SIGNOUT\"\n      });\n    }).catch(function (error) {\n      // An error happened.\n      console.log(error);\n    });\n  };\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Signin\");","map":{"version":3,"sources":["C:/Users/Jony/OneDrive/Desktop/bebsha-lagbe-jony/src/Redux/Actions/auth.js"],"names":["firebase","googleLogin","history","dispatch","provider","auth","GoogleAuthProvider","setCustomParameters","prompt","Signin","facebookLogin","FacebookAuthProvider","githubLogin","GithubAuthProvider","signInWithPopup","then","user","userInfo","name","displayName","email","imageUrl","photoURL","uid","timestamp","database","ServerValue","TIMESTAMP","ref","child","set","console","log","type","payload","push","catch","error","checkUser","onAuthStateChanged","once","snapshot","val","signOut"],"mappings":"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","sourcesContent":["import firebase from \"../../config/firebase\";\n\nexport function googleLogin(history) {\n  return (dispatch) => {\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\",\n    });\n    Signin(dispatch, history, provider);\n  };\n}\nexport function facebookLogin(history) {\n  return (dispatch) => {\n    var provider = new firebase.auth.FacebookAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\",\n    });\n    Signin(dispatch, history, provider);\n  };\n}\nexport function githubLogin(history) {\n  return (dispatch) => {\n    var provider = new firebase.auth.GithubAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\",\n    });\n    Signin(dispatch, history, provider);\n  };\n}\n\nfunction Signin(dispatch, history, provider) {\n  firebase\n    .auth()\n    .signInWithPopup(provider)\n    .then(function ({ user }) {\n      const userInfo = {\n        name: user.displayName,\n        email: user.email,\n        imageUrl: user.photoURL,\n        uid: user.uid,\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\n      };\n      firebase\n        .database()\n        .ref(\"/\")\n        .child(`users/${user.uid}`)\n        .set(userInfo)\n        .then(() => console.log(\"User Add SuccessFully\"));\n      dispatch({ type: \"SETUSER\", payload: userInfo });\n      history.push(\"/posts\");\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n}\n\nexport const checkUser = () => {\n  return (dispatch) => {\n     firebase.auth().onAuthStateChanged(function (user) {\n      if (user != null) {\n        firebase.database().ref(\"/\")\n        .child(`users/${user.uid}`)\n        .once('value', (snapshot) => {\n          const userInfo = snapshot.val()\n          dispatch({ type: \"SETUSER\", payload: userInfo });\n        })\n      \n      }\n    });\n  };\n};\n\nexport const signOut = () => {\n  return (dispatch) => {\n    firebase.auth()\n      .signOut().then(function () {\n        dispatch({ type: \"SIGNOUT\" });\n      })\n      .catch(function (error) {\n        // An error happened.\n        console.log(error);\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}