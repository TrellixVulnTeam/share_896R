{"ast":null,"code":"import firebase from\"../../config/firebase\";export function googleLogin(history){return function(dispatch){var provider=new firebase.auth.GoogleAuthProvider();provider.setCustomParameters({prompt:\"select_account\"});Signin(dispatch,history,provider);};}export function facebookLogin(history){return function(dispatch){var provider=new firebase.auth.FacebookAuthProvider();provider.setCustomParameters({prompt:\"select_account\"});Signin(dispatch,history,provider);};}export function githubLogin(history){return function(dispatch){var provider=new firebase.auth.GithubAuthProvider();provider.setCustomParameters({prompt:\"select_account\"});Signin(dispatch,history,provider);};}function Signin(dispatch,history,provider){firebase.auth().signInWithPopup(provider).then(function(_ref){var user=_ref.user;var userInfo={name:user.displayName,email:user.email,imageUrl:user.photoURL,uid:user.uid,timestamp:firebase.database.ServerValue.TIMESTAMP};firebase.database().ref(\"/\").child(\"users/\".concat(user.uid)).set(userInfo).then(function(){return console.log(\"User Add SuccessFully\");});dispatch({type:\"SETUSER\",payload:userInfo});history.push(\"/posts\");}).catch(function(error){console.log(error);});}export var checkUser=function checkUser(){return function(dispatch){firebase.auth().onAuthStateChanged(function(user){if(user!=null){firebase.database().ref(\"/\").child(\"users/\".concat(user.uid)).once('value',function(snapshot){var userInfo=snapshot.val();dispatch({type:\"SETUSER\",payload:userInfo});});}});};};export var signOut=function signOut(){return function(dispatch){firebase.auth().signOut().then(function(){dispatch({type:\"SIGNOUT\"});}).catch(function(error){// An error happened.\nconsole.log(error);});};};","map":{"version":3,"sources":["C:/Users/Jony/OneDrive/Desktop/bebsha-lagbe-jony/src/Redux/Actions/auth.js"],"names":["firebase","googleLogin","history","dispatch","provider","auth","GoogleAuthProvider","setCustomParameters","prompt","Signin","facebookLogin","FacebookAuthProvider","githubLogin","GithubAuthProvider","signInWithPopup","then","user","userInfo","name","displayName","email","imageUrl","photoURL","uid","timestamp","database","ServerValue","TIMESTAMP","ref","child","set","console","log","type","payload","push","catch","error","checkUser","onAuthStateChanged","once","snapshot","val","signOut"],"mappings":"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","sourcesContent":["import firebase from \"../../config/firebase\";\n\nexport function googleLogin(history) {\n  return (dispatch) => {\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\",\n    });\n    Signin(dispatch, history, provider);\n  };\n}\nexport function facebookLogin(history) {\n  return (dispatch) => {\n    var provider = new firebase.auth.FacebookAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\",\n    });\n    Signin(dispatch, history, provider);\n  };\n}\nexport function githubLogin(history) {\n  return (dispatch) => {\n    var provider = new firebase.auth.GithubAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\",\n    });\n    Signin(dispatch, history, provider);\n  };\n}\n\nfunction Signin(dispatch, history, provider) {\n  firebase\n    .auth()\n    .signInWithPopup(provider)\n    .then(function ({ user }) {\n      const userInfo = {\n        name: user.displayName,\n        email: user.email,\n        imageUrl: user.photoURL,\n        uid: user.uid,\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\n      };\n      firebase\n        .database()\n        .ref(\"/\")\n        .child(`users/${user.uid}`)\n        .set(userInfo)\n        .then(() => console.log(\"User Add SuccessFully\"));\n      dispatch({ type: \"SETUSER\", payload: userInfo });\n      history.push(\"/posts\");\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n}\n\nexport const checkUser = () => {\n  return (dispatch) => {\n     firebase.auth().onAuthStateChanged(function (user) {\n      if (user != null) {\n        firebase.database().ref(\"/\")\n        .child(`users/${user.uid}`)\n        .once('value', (snapshot) => {\n          const userInfo = snapshot.val()\n          dispatch({ type: \"SETUSER\", payload: userInfo });\n        })\n      \n      }\n    });\n  };\n};\n\nexport const signOut = () => {\n  return (dispatch) => {\n    firebase.auth()\n      .signOut().then(function () {\n        dispatch({ type: \"SIGNOUT\" });\n      })\n      .catch(function (error) {\n        // An error happened.\n        console.log(error);\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}